GLOB sdist-make: /workdir/umap-learn-0.5.3/setup.py
cpythonlibtest-unit-test-tests create: /workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests
cpythonlibtest-unit-test-tests installdeps: mock, pytest, -rrequirements.txt, -rdoc/doc_requirements.txt
cpythonlibtest-unit-test-tests inst: /workdir/umap-learn-0.5.3/.tox/.tmp/package/1/umap-learn-0.5.3.zip
cpythonlibtest-unit-test-tests installed: alabaster==0.7.13,Babel==2.13.1,bokeh==3.3.1,certifi==2023.11.17,charset-normalizer==3.3.2,click==8.1.7,cloudpickle==3.0.0,colorcet==3.0.1,contourpy==1.2.0,cycler==0.12.1,dask==2023.11.0,datashader==0.16.0,docutils==0.20.1,exceptiongroup==1.2.0,fonttools==4.45.1,fsspec==2023.10.0,idna==3.6,imagesize==1.4.1,importlib-metadata==6.8.0,iniconfig==2.0.0,Jinja2==3.1.2,joblib==1.3.2,kiwisolver==1.4.5,llvmlite==0.41.1,locket==1.0.0,MarkupSafe==2.1.3,matplotlib==3.8.2,mock==5.1.0,multipledispatch==1.0.0,numba==0.58.1,numpy==1.26.2,packaging==23.2,pandas==2.1.3,param==2.0.1,partd==1.4.1,Pillow==10.1.0,pluggy==1.3.0,pyct==0.5.0,Pygments==2.17.2,pynndescent==0.5.11,pyparsing==3.1.1,pytest==7.4.3,python-dateutil==2.8.2,pytz==2023.3.post1,PyYAML==6.0.1,requests==2.31.0,scikit-learn==1.3.2,scipy==1.11.4,seaborn==0.13.0,six==1.16.0,snowballstemmer==2.2.0,Sphinx==7.2.6,sphinx-gallery==0.15.0,sphinxcontrib-applehelp==1.0.7,sphinxcontrib-devhelp==1.0.5,sphinxcontrib-htmlhelp==2.0.4,sphinxcontrib-jsmath==1.0.1,sphinxcontrib-qthelp==1.0.6,sphinxcontrib-serializinghtml==1.1.9,tbb==2021.11.0,threadpoolctl==3.2.0,tomli==2.0.1,toolz==0.12.0,tornado==6.4,tqdm==4.66.1,tzdata==2023.3,umap-learn @ file:///workdir/umap-learn-0.5.3/.tox/.tmp/package/1/umap-learn-0.5.3.zip#sha256=4e18cd736b5308e78158ddad389623fd05c2f1e3aebb1d53de2e613947ac7141,urllib3==2.1.0,xarray==2023.11.0,xyzservices==2023.10.1,zipp==3.17.0
cpythonlibtest-unit-test-tests run-test-pre: PYTHONHASHSEED='4145539877'
cpythonlibtest-unit-test-tests run-test: commands[0] | pytest -v --tb=native --junitxml /workdir/results/umap-learn/0.5.3/1/cpython-test-results.xml
============================= test session starts ==============================
platform linux -- Python 3.10.8, pytest-7.4.3, pluggy-1.3.0 -- /workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/bin/python
cachedir: .tox/cpythonlibtest-unit-test-tests/.pytest_cache
rootdir: /workdir/umap-learn-0.5.3
collecting ... collected 199 items

umap/tests/test_aligned_umap.py::test_neighbor_local_neighbor_accuracy PASSED [  0%]
umap/tests/test_aligned_umap.py::test_local_clustering PASSED            [  1%]
umap/tests/test_aligned_umap.py::test_aligned_update PASSED              [  1%]
umap/tests/test_chunked_parallel_spatial_metric.py::test_chunked_parallel_alternative_implementations SKIPPED [  2%]
umap/tests/test_chunked_parallel_spatial_metric.py::test_chunked_parallel_special_metric_implementation_hellinger SKIPPED [  2%]
umap/tests/test_chunked_parallel_spatial_metric.py::test_benchmark_chunked_parallel_special_metric_x_only[benchmark_data0] SKIPPED [  3%]
umap/tests/test_chunked_parallel_spatial_metric.py::test_benchmark_chunked_parallel_special_metric_x_only[benchmark_data1] SKIPPED [  3%]
umap/tests/test_chunked_parallel_spatial_metric.py::test_benchmark_chunked_parallel_special_metric_x_only[benchmark_data2] SKIPPED [  4%]
umap/tests/test_chunked_parallel_spatial_metric.py::test_benchmark_chunked_parallel_special_metric_x_only[benchmark_data3] SKIPPED [  4%]
umap/tests/test_chunked_parallel_spatial_metric.py::test_benchmark_chunked_parallel_special_metric_x_only[benchmark_data4] SKIPPED [  5%]
umap/tests/test_chunked_parallel_spatial_metric.py::test_benchmark_chunked_parallel_special_metric_x_only[benchmark_data5] SKIPPED [  5%]
umap/tests/test_chunked_parallel_spatial_metric.py::test_benchmark_chunked_parallel_special_metric_x_only[benchmark_data6] SKIPPED [  6%]
umap/tests/test_chunked_parallel_spatial_metric.py::test_benchmark_chunked_parallel_special_metric_x_only[benchmark_data7] SKIPPED [  6%]
umap/tests/test_chunked_parallel_spatial_metric.py::test_benchmark_chunked_parallel_special_metric_x_only[benchmark_data8] SKIPPED [  7%]
umap/tests/test_chunked_parallel_spatial_metric.py::test_benchmark_chunked_parallel_special_metric_x_only[benchmark_data9] SKIPPED [  7%]
umap/tests/test_chunked_parallel_spatial_metric.py::test_benchmark_workaround_590_x_only[benchmark_data0] SKIPPED [  8%]
umap/tests/test_chunked_parallel_spatial_metric.py::test_benchmark_workaround_590_x_only[benchmark_data1] SKIPPED [  8%]
umap/tests/test_chunked_parallel_spatial_metric.py::test_benchmark_workaround_590_x_only[benchmark_data2] SKIPPED [  9%]
umap/tests/test_chunked_parallel_spatial_metric.py::test_benchmark_workaround_590_x_only[benchmark_data3] SKIPPED [  9%]
umap/tests/test_chunked_parallel_spatial_metric.py::test_benchmark_workaround_590_x_only[benchmark_data4] SKIPPED [ 10%]
umap/tests/test_chunked_parallel_spatial_metric.py::test_benchmark_workaround_590_x_only[benchmark_data5] SKIPPED [ 10%]
umap/tests/test_chunked_parallel_spatial_metric.py::test_benchmark_workaround_590_x_only[benchmark_data6] SKIPPED [ 11%]
umap/tests/test_chunked_parallel_spatial_metric.py::test_benchmark_workaround_590_x_only[benchmark_data7] SKIPPED [ 11%]
umap/tests/test_chunked_parallel_spatial_metric.py::test_benchmark_workaround_590_x_only[benchmark_data8] SKIPPED [ 12%]
umap/tests/test_chunked_parallel_spatial_metric.py::test_benchmark_workaround_590_x_only[benchmark_data9] SKIPPED [ 12%]
umap/tests/test_chunked_parallel_spatial_metric.py::test_benchmark_chunked_parallel_special_metric_x_y[benchmark_data0] SKIPPED [ 13%]
umap/tests/test_chunked_parallel_spatial_metric.py::test_benchmark_chunked_parallel_special_metric_x_y[benchmark_data1] SKIPPED [ 13%]
umap/tests/test_chunked_parallel_spatial_metric.py::test_benchmark_chunked_parallel_special_metric_x_y[benchmark_data2] SKIPPED [ 14%]
umap/tests/test_chunked_parallel_spatial_metric.py::test_benchmark_chunked_parallel_special_metric_x_y[benchmark_data3] SKIPPED [ 14%]
umap/tests/test_chunked_parallel_spatial_metric.py::test_benchmark_chunked_parallel_special_metric_x_y[benchmark_data4] SKIPPED [ 15%]
umap/tests/test_chunked_parallel_spatial_metric.py::test_benchmark_chunked_parallel_special_metric_x_y[benchmark_data5] SKIPPED [ 15%]
umap/tests/test_chunked_parallel_spatial_metric.py::test_benchmark_chunked_parallel_special_metric_x_y[benchmark_data6] SKIPPED [ 16%]
umap/tests/test_chunked_parallel_spatial_metric.py::test_benchmark_chunked_parallel_special_metric_x_y[benchmark_data7] SKIPPED [ 16%]
umap/tests/test_chunked_parallel_spatial_metric.py::test_benchmark_chunked_parallel_special_metric_x_y[benchmark_data8] SKIPPED [ 17%]
umap/tests/test_chunked_parallel_spatial_metric.py::test_benchmark_chunked_parallel_special_metric_x_y[benchmark_data9] SKIPPED [ 17%]
umap/tests/test_chunked_parallel_spatial_metric.py::test_benchmark_workaround_590_x_y[benchmark_data0] SKIPPED [ 18%]
umap/tests/test_chunked_parallel_spatial_metric.py::test_benchmark_workaround_590_x_y[benchmark_data1] SKIPPED [ 18%]
umap/tests/test_chunked_parallel_spatial_metric.py::test_benchmark_workaround_590_x_y[benchmark_data2] SKIPPED [ 19%]
umap/tests/test_chunked_parallel_spatial_metric.py::test_benchmark_workaround_590_x_y[benchmark_data3] SKIPPED [ 19%]
umap/tests/test_chunked_parallel_spatial_metric.py::test_benchmark_workaround_590_x_y[benchmark_data4] SKIPPED [ 20%]
umap/tests/test_chunked_parallel_spatial_metric.py::test_benchmark_workaround_590_x_y[benchmark_data5] SKIPPED [ 20%]
umap/tests/test_chunked_parallel_spatial_metric.py::test_benchmark_workaround_590_x_y[benchmark_data6] SKIPPED [ 21%]
umap/tests/test_chunked_parallel_spatial_metric.py::test_benchmark_workaround_590_x_y[benchmark_data7] SKIPPED [ 21%]
umap/tests/test_chunked_parallel_spatial_metric.py::test_benchmark_workaround_590_x_y[benchmark_data8] SKIPPED [ 22%]
umap/tests/test_chunked_parallel_spatial_metric.py::test_benchmark_workaround_590_x_y[benchmark_data9] SKIPPED [ 22%]
umap/tests/test_composite_models.py::test_composite_trustworthiness FAILED [ 23%]
umap/tests/test_composite_models.py::test_composite_trustworthiness_random_init SKIPPED [ 23%]
umap/tests/test_composite_models.py::test_composite_trustworthiness_on_iris PASSED [ 24%]
umap/tests/test_composite_models.py::test_contrastive_trustworthiness_on_iris PASSED [ 24%]
umap/tests/test_densmap.py::test_densmap_trustworthiness PASSED          [ 25%]
umap/tests/test_densmap.py::test_densmap_trustworthiness_random_init SKIPPED [ 25%]
umap/tests/test_densmap.py::test_densmap_trustworthiness_on_iris PASSED  [ 26%]
umap/tests/test_densmap.py::test_densmap_trustworthiness_on_iris_supervised PASSED [ 26%]
umap/tests/test_parametric_umap.py::test_create_model SKIPPED (Tenso...) [ 27%]
umap/tests/test_parametric_umap.py::test_global_loss SKIPPED (Tensor...) [ 27%]
umap/tests/test_parametric_umap.py::test_inverse_transform SKIPPED (...) [ 28%]
umap/tests/test_parametric_umap.py::test_nonparametric SKIPPED (Tens...) [ 28%]
umap/tests/test_parametric_umap.py::test_custom_encoder_decoder SKIPPED  [ 29%]
umap/tests/test_parametric_umap.py::test_validation SKIPPED (TensorF...) [ 29%]
umap/tests/test_parametric_umap.py::test_save_load SKIPPED (TensorFl...) [ 30%]
umap/tests/test_plot.py::test_plot_runs_at_all SKIPPED (umap plot no...) [ 30%]
umap/tests/test_umap_metrics.py::test_euclidean PASSED                   [ 31%]
umap/tests/test_umap_metrics.py::test_manhattan PASSED                   [ 31%]
umap/tests/test_umap_metrics.py::test_chebyshev PASSED                   [ 32%]
umap/tests/test_umap_metrics.py::test_minkowski PASSED                   [ 32%]
umap/tests/test_umap_metrics.py::test_hamming PASSED                     [ 33%]
umap/tests/test_umap_metrics.py::test_canberra PASSED                    [ 33%]
umap/tests/test_umap_metrics.py::test_braycurtis PASSED                  [ 34%]
umap/tests/test_umap_metrics.py::test_cosine PASSED                      [ 34%]
umap/tests/test_umap_metrics.py::test_correlation PASSED                 [ 35%]
umap/tests/test_umap_metrics.py::test_jaccard PASSED                     [ 35%]
umap/tests/test_umap_metrics.py::test_matching PASSED                    [ 36%]
umap/tests/test_umap_metrics.py::test_dice PASSED                        [ 36%]
umap/tests/test_umap_metrics.py::test_kulsinski FAILED                   [ 37%]
umap/tests/test_umap_metrics.py::test_rogerstanimoto PASSED              [ 37%]
umap/tests/test_umap_metrics.py::test_russellrao PASSED                  [ 38%]
umap/tests/test_umap_metrics.py::test_sokalmichener PASSED               [ 38%]
umap/tests/test_umap_metrics.py::test_sokalsneath PASSED                 [ 39%]
umap/tests/test_umap_metrics.py::test_yule PASSED                        [ 39%]
umap/tests/test_umap_metrics.py::test_sparse_euclidean FAILED            [ 40%]
umap/tests/test_umap_metrics.py::test_sparse_manhattan FAILED            [ 40%]
umap/tests/test_umap_metrics.py::test_sparse_chebyshev FAILED            [ 41%]
umap/tests/test_umap_metrics.py::test_sparse_minkowski FAILED            [ 41%]
umap/tests/test_umap_metrics.py::test_sparse_hamming FAILED              [ 42%]
umap/tests/test_umap_metrics.py::test_sparse_canberra FAILED             [ 42%]
umap/tests/test_umap_metrics.py::test_sparse_cosine FAILED               [ 43%]
umap/tests/test_umap_metrics.py::test_sparse_correlation FAILED          [ 43%]
umap/tests/test_umap_metrics.py::test_sparse_braycurtis FAILED           [ 44%]
umap/tests/test_umap_metrics.py::test_sparse_jaccard FAILED              [ 44%]
umap/tests/test_umap_metrics.py::test_sparse_matching FAILED             [ 45%]
umap/tests/test_umap_metrics.py::test_sparse_dice FAILED                 [ 45%]
umap/tests/test_umap_metrics.py::test_sparse_kulsinski FAILED            [ 46%]
umap/tests/test_umap_metrics.py::test_sparse_rogerstanimoto FAILED       [ 46%]
umap/tests/test_umap_metrics.py::test_sparse_russellrao FAILED           [ 47%]
umap/tests/test_umap_metrics.py::test_sparse_sokalmichener FAILED        [ 47%]
umap/tests/test_umap_metrics.py::test_sparse_sokalsneath FAILED          [ 48%]
umap/tests/test_umap_metrics.py::test_seuclidean PASSED                  [ 48%]
umap/tests/test_umap_metrics.py::test_weighted_minkowski SKIPPED (in...) [ 49%]
umap/tests/test_umap_metrics.py::test_mahalanobis PASSED                 [ 49%]
umap/tests/test_umap_metrics.py::test_haversine PASSED                   [ 50%]
umap/tests/test_umap_metrics.py::test_hellinger PASSED                   [ 50%]
umap/tests/test_umap_metrics.py::test_sparse_hellinger PASSED            [ 51%]
umap/tests/test_umap_metrics.py::test_grad_metrics_match_metrics PASSED  [ 51%]
umap/tests/test_umap_nn.py::test_nn_bad_metric PASSED                    [ 52%]
umap/tests/test_umap_nn.py::test_nn_bad_metric_sparse_data PASSED        [ 52%]
umap/tests/test_umap_nn.py::test_nn_descent_neighbor_accuracy SKIPPED    [ 53%]
umap/tests/test_umap_nn.py::test_nn_descent_neighbor_accuracy_low_memory SKIPPED [ 53%]
umap/tests/test_umap_nn.py::test_angular_nn_descent_neighbor_accuracy SKIPPED [ 54%]
umap/tests/test_umap_nn.py::test_sparse_nn_descent_neighbor_accuracy SKIPPED [ 54%]
umap/tests/test_umap_nn.py::test_sparse_nn_descent_neighbor_accuracy_low_memory SKIPPED [ 55%]
umap/tests/test_umap_nn.py::test_nn_descent_neighbor_accuracy_callable_metric SKIPPED [ 55%]
umap/tests/test_umap_nn.py::test_sparse_angular_nn_descent_neighbor_accuracy SKIPPED [ 56%]
umap/tests/test_umap_nn.py::test_smooth_knn_dist_l1norms PASSED          [ 56%]
umap/tests/test_umap_nn.py::test_smooth_knn_dist_l1norms_w_connectivity PASSED [ 57%]
umap/tests/test_umap_on_iris.py::test_umap_trustworthiness_on_iris PASSED [ 57%]
umap/tests/test_umap_on_iris.py::test_initialized_umap_trustworthiness_on_iris PASSED [ 58%]
umap/tests/test_umap_on_iris.py::test_umap_trustworthiness_on_sphere_iris PASSED [ 58%]
umap/tests/test_umap_on_iris.py::test_umap_transform_on_iris PASSED      [ 59%]
umap/tests/test_umap_on_iris.py::test_umap_transform_on_iris_w_pynndescent PASSED [ 59%]
umap/tests/test_umap_on_iris.py::test_umap_transform_on_iris_modified_dtype PASSED [ 60%]
umap/tests/test_umap_on_iris.py::test_umap_sparse_transform_on_iris PASSED [ 60%]
umap/tests/test_umap_on_iris.py::test_precomputed_transform_on_iris PASSED [ 61%]
umap/tests/test_umap_on_iris.py::test_precomputed_sparse_transform_on_iris FAILED [ 61%]
umap/tests/test_umap_on_iris.py::test_umap_clusterability_on_supervised_iris PASSED [ 62%]
umap/tests/test_umap_on_iris.py::test_umap_inverse_transform_on_iris PASSED [ 62%]
umap/tests/test_umap_ops.py::test_blobs_cluster PASSED                   [ 63%]
umap/tests/test_umap_ops.py::test_multi_component_layout FAILED          [ 63%]
umap/tests/test_umap_ops.py::test_multi_component_layout_precomputed FAILED [ 64%]
umap/tests/test_umap_ops.py::test_disconnected_data[True-jaccard-1] PASSED [ 64%]
umap/tests/test_umap_ops.py::test_disconnected_data[True-jaccard-5] PASSED [ 65%]
umap/tests/test_umap_ops.py::test_disconnected_data[True-hellinger-1] PASSED [ 65%]
umap/tests/test_umap_ops.py::test_disconnected_data[True-hellinger-5] PASSED [ 66%]
umap/tests/test_umap_ops.py::test_disconnected_data[False-jaccard-1] PASSED [ 66%]
umap/tests/test_umap_ops.py::test_disconnected_data[False-jaccard-5] PASSED [ 67%]
umap/tests/test_umap_ops.py::test_disconnected_data[False-hellinger-1] PASSED [ 67%]
umap/tests/test_umap_ops.py::test_disconnected_data[False-hellinger-5] PASSED [ 68%]
umap/tests/test_umap_ops.py::test_disconnected_data_precomputed[True-1] FAILED [ 68%]
umap/tests/test_umap_ops.py::test_disconnected_data_precomputed[False-1] PASSED [ 69%]
umap/tests/test_umap_ops.py::test_bad_transform_data PASSED              [ 69%]
umap/tests/test_umap_ops.py::test_umap_transform_embedding_stability PASSED [ 70%]
umap/tests/test_umap_ops.py::test_umap_update PASSED                     [ 70%]
umap/tests/test_umap_ops.py::test_umap_update_large PASSED               [ 71%]
umap/tests/test_umap_ops.py::test_umap_graph_layout PASSED               [ 71%]
umap/tests/test_umap_ops.py::test_component_layout_options FAILED        [ 72%]
umap/tests/test_umap_repeated_data.py::test_repeated_points_large_sparse_spatial FAILED [ 72%]
umap/tests/test_umap_repeated_data.py::test_repeated_points_small_sparse_spatial FAILED [ 73%]
umap/tests/test_umap_repeated_data.py::test_repeated_points_large_dense_spatial PASSED [ 73%]
umap/tests/test_umap_repeated_data.py::test_repeated_points_small_dense_spatial PASSED [ 74%]
umap/tests/test_umap_repeated_data.py::test_repeated_points_large_sparse_binary FAILED [ 74%]
umap/tests/test_umap_repeated_data.py::test_repeated_points_small_sparse_binary FAILED [ 75%]
umap/tests/test_umap_repeated_data.py::test_repeated_points_large_dense_binary PASSED [ 75%]
umap/tests/test_umap_repeated_data.py::test_repeated_points_small_dense_binary PASSED [ 76%]
umap/tests/test_umap_repeated_data.py::test_repeated_points_large_n PASSED [ 76%]
umap/tests/test_umap_trustworthiness.py::test_umap_sparse_trustworthiness PASSED [ 77%]
umap/tests/test_umap_trustworthiness.py::test_umap_trustworthiness_fast_approx PASSED [ 77%]
umap/tests/test_umap_trustworthiness.py::test_umap_trustworthiness_random_init PASSED [ 78%]
umap/tests/test_umap_trustworthiness.py::test_supervised_umap_trustworthiness PASSED [ 78%]
umap/tests/test_umap_trustworthiness.py::test_semisupervised_umap_trustworthiness PASSED [ 79%]
umap/tests/test_umap_trustworthiness.py::test_metric_supervised_umap_trustworthiness PASSED [ 79%]
umap/tests/test_umap_trustworthiness.py::test_string_metric_supervised_umap_trustworthiness PASSED [ 80%]
umap/tests/test_umap_trustworthiness.py::test_discrete_metric_supervised_umap_trustworthiness PASSED [ 80%]
umap/tests/test_umap_trustworthiness.py::test_count_metric_supervised_umap_trustworthiness PASSED [ 81%]
umap/tests/test_umap_trustworthiness.py::test_sparse_precomputed_metric_umap_trustworthiness FAILED [ 81%]
umap/tests/test_umap_validation_params.py::test_umap_negative_op PASSED  [ 82%]
umap/tests/test_umap_validation_params.py::test_umap_too_large_op PASSED [ 82%]
umap/tests/test_umap_validation_params.py::test_umap_bad_too_large_min_dist PASSED [ 83%]
umap/tests/test_umap_validation_params.py::test_umap_negative_min_dist PASSED [ 83%]
umap/tests/test_umap_validation_params.py::test_umap_negative_n_components PASSED [ 84%]
umap/tests/test_umap_validation_params.py::test_umap_non_integer_n_components PASSED [ 84%]
umap/tests/test_umap_validation_params.py::test_umap_too_small_n_neighbours PASSED [ 85%]
umap/tests/test_umap_validation_params.py::test_umap_negative_n_neighbours PASSED [ 85%]
umap/tests/test_umap_validation_params.py::test_umap_bad_metric PASSED   [ 86%]
umap/tests/test_umap_validation_params.py::test_umap_negative_learning_rate PASSED [ 86%]
umap/tests/test_umap_validation_params.py::test_umap_negative_repulsion PASSED [ 87%]
umap/tests/test_umap_validation_params.py::test_umap_negative_sample_rate PASSED [ 87%]
umap/tests/test_umap_validation_params.py::test_umap_bad_init PASSED     [ 88%]
umap/tests/test_umap_validation_params.py::test_umap_bad_numeric_init PASSED [ 88%]
umap/tests/test_umap_validation_params.py::test_umap_bad_matrix_init PASSED [ 89%]
umap/tests/test_umap_validation_params.py::test_umap_negative_n_epochs PASSED [ 89%]
umap/tests/test_umap_validation_params.py::test_umap_negative_target_n_neighbours PASSED [ 90%]
umap/tests/test_umap_validation_params.py::test_umap_bad_output_metric PASSED [ 90%]
umap/tests/test_umap_validation_params.py::test_haversine_on_highd PASSED [ 91%]
umap/tests/test_umap_validation_params.py::test_umap_haversine_embed_to_highd PASSED [ 91%]
umap/tests/test_umap_validation_params.py::test_umap_too_many_neighbors_warns PASSED [ 92%]
umap/tests/test_umap_validation_params.py::test_densmap_lambda PASSED    [ 92%]
umap/tests/test_umap_validation_params.py::test_densmap_var_shift PASSED [ 93%]
umap/tests/test_umap_validation_params.py::test_densmap_frac PASSED      [ 93%]
umap/tests/test_umap_validation_params.py::test_umap_unique_and_precomputed PASSED [ 94%]
umap/tests/test_umap_validation_params.py::test_densmap_bad_output_metric PASSED [ 94%]
umap/tests/test_umap_validation_params.py::test_umap_bad_n_components PASSED [ 95%]
umap/tests/test_umap_validation_params.py::test_umap_bad_metrics PASSED  [ 95%]
umap/tests/test_umap_validation_params.py::test_umap_bad_n_jobs PASSED   [ 96%]
umap/tests/test_umap_validation_params.py::test_umap_custom_distance_w_grad PASSED [ 96%]
umap/tests/test_umap_validation_params.py::test_umap_bad_output_metric_no_grad PASSED [ 97%]
umap/tests/test_umap_validation_params.py::test_umap_bad_hellinger_data PASSED [ 97%]
umap/tests/test_umap_validation_params.py::test_umap_update_bad_params PASSED [ 98%]
umap/tests/test_umap_validation_params.py::test_umap_fit_data_and_targets_compliant PASSED [ 98%]
umap/tests/test_umap_validation_params.py::test_umap_fit_instance_returned PASSED [ 99%]
umap/tests/test_umap_validation_params.py::test_umap_inverse_transform_fails_expectedly PASSED [100%]

=================================== FAILURES ===================================
________________________ test_composite_trustworthiness ________________________
Traceback (most recent call last):
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 341, in from_call
    result: Optional[TResult] = func()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 262, in <lambda>
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_hooks.py", line 493, in __call__
    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_manager.py", line 115, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 152, in _multicall
    return outcome.get_result()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_result.py", line 114, in get_result
    raise exc.with_traceback(exc.__traceback__)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 77, in _multicall
    res = hook_impl.function(*args)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 177, in pytest_runtest_call
    raise e
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 169, in pytest_runtest_call
    item.runtest()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/python.py", line 1792, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_hooks.py", line 493, in __call__
    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_manager.py", line 115, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 113, in _multicall
    raise exception.with_traceback(exception.__traceback__)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 77, in _multicall
    res = hook_impl.function(*args)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/python.py", line 194, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/workdir/umap-learn-0.5.3/umap/tests/test_composite_models.py", line 27, in test_composite_trustworthiness
    assert (
AssertionError: Insufficiently trustworthy embedding fornn dataset: 0.8101449275362319
assert 0.8101449275362319 >= 0.82
________________________________ test_kulsinski ________________________________
Traceback (most recent call last):
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 341, in from_call
    result: Optional[TResult] = func()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 262, in <lambda>
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_hooks.py", line 493, in __call__
    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_manager.py", line 115, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 152, in _multicall
    return outcome.get_result()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_result.py", line 114, in get_result
    raise exc.with_traceback(exc.__traceback__)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 77, in _multicall
    res = hook_impl.function(*args)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 177, in pytest_runtest_call
    raise e
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 169, in pytest_runtest_call
    item.runtest()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/python.py", line 1792, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_hooks.py", line 493, in __call__
    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_manager.py", line 115, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 113, in _multicall
    raise exception.with_traceback(exception.__traceback__)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 77, in _multicall
    res = hook_impl.function(*args)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/python.py", line 194, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/workdir/umap-learn-0.5.3/umap/tests/test_umap_metrics.py", line 216, in test_kulsinski
    binary_check("kulsinski", binary_data, binary_distances)
  File "/workdir/umap-learn-0.5.3/umap/tests/test_umap_metrics.py", line 65, in binary_check
    dist_matrix = pairwise_distances(binary_data, metric=metric)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/metrics/pairwise.py", line 2152, in pairwise_distances
    raise ValueError(
ValueError: Unknown metric kulsinski. Valid metrics are ['euclidean', 'l2', 'l1', 'manhattan', 'cityblock', 'braycurtis', 'canberra', 'chebyshev', 'correlation', 'cosine', 'dice', 'hamming', 'jaccard', 'mahalanobis', 'matching', 'minkowski', 'rogerstanimoto', 'russellrao', 'seuclidean', 'sokalmichener', 'sokalsneath', 'sqeuclidean', 'yule', 'wminkowski', 'nan_euclidean', 'haversine'], or 'precomputed', or a callable
____________________________ test_sparse_euclidean _____________________________
Traceback (most recent call last):
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 341, in from_call
    result: Optional[TResult] = func()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 262, in <lambda>
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_hooks.py", line 493, in __call__
    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_manager.py", line 115, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 152, in _multicall
    return outcome.get_result()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_result.py", line 114, in get_result
    raise exc.with_traceback(exc.__traceback__)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 77, in _multicall
    res = hook_impl.function(*args)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 177, in pytest_runtest_call
    raise e
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 169, in pytest_runtest_call
    item.runtest()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/python.py", line 1792, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_hooks.py", line 493, in __call__
    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_manager.py", line 115, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 113, in _multicall
    raise exception.with_traceback(exception.__traceback__)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 77, in _multicall
    res = hook_impl.function(*args)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/python.py", line 194, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/workdir/umap-learn-0.5.3/umap/tests/test_umap_metrics.py", line 245, in test_sparse_euclidean
    sparse_spatial_check("euclidean", sparse_spatial_data)
  File "/workdir/umap-learn-0.5.3/umap/tests/test_umap_metrics.py", line 125, in sparse_spatial_check
    dist_matrix = pairwise_distances(sparse_spatial_data.todense(), metric=metric)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/metrics/pairwise.py", line 2196, in pairwise_distances
    return _parallel_pairwise(X, Y, func, n_jobs, **kwds)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/metrics/pairwise.py", line 1766, in _parallel_pairwise
    return func(X, Y, **kwds)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/metrics/pairwise.py", line 310, in euclidean_distances
    X, Y = check_pairwise_arrays(X, Y)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/metrics/pairwise.py", line 156, in check_pairwise_arrays
    X = Y = check_array(
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/utils/validation.py", line 751, in check_array
    raise TypeError(
TypeError: np.matrix is not supported. Please convert to a numpy array with np.asarray. For more information see: https://numpy.org/doc/stable/reference/generated/numpy.matrix.html
____________________________ test_sparse_manhattan _____________________________
Traceback (most recent call last):
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 341, in from_call
    result: Optional[TResult] = func()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 262, in <lambda>
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_hooks.py", line 493, in __call__
    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_manager.py", line 115, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 152, in _multicall
    return outcome.get_result()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_result.py", line 114, in get_result
    raise exc.with_traceback(exc.__traceback__)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 77, in _multicall
    res = hook_impl.function(*args)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 177, in pytest_runtest_call
    raise e
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 169, in pytest_runtest_call
    item.runtest()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/python.py", line 1792, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_hooks.py", line 493, in __call__
    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_manager.py", line 115, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 113, in _multicall
    raise exception.with_traceback(exception.__traceback__)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 77, in _multicall
    res = hook_impl.function(*args)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/python.py", line 194, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/workdir/umap-learn-0.5.3/umap/tests/test_umap_metrics.py", line 249, in test_sparse_manhattan
    sparse_spatial_check("manhattan", sparse_spatial_data)
  File "/workdir/umap-learn-0.5.3/umap/tests/test_umap_metrics.py", line 125, in sparse_spatial_check
    dist_matrix = pairwise_distances(sparse_spatial_data.todense(), metric=metric)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/metrics/pairwise.py", line 2196, in pairwise_distances
    return _parallel_pairwise(X, Y, func, n_jobs, **kwds)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/metrics/pairwise.py", line 1766, in _parallel_pairwise
    return func(X, Y, **kwds)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/utils/_param_validation.py", line 214, in wrapper
    return func(*args, **kwargs)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/metrics/pairwise.py", line 1046, in manhattan_distances
    X, Y = check_pairwise_arrays(X, Y)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/metrics/pairwise.py", line 156, in check_pairwise_arrays
    X = Y = check_array(
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/utils/validation.py", line 751, in check_array
    raise TypeError(
TypeError: np.matrix is not supported. Please convert to a numpy array with np.asarray. For more information see: https://numpy.org/doc/stable/reference/generated/numpy.matrix.html
____________________________ test_sparse_chebyshev _____________________________
Traceback (most recent call last):
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 341, in from_call
    result: Optional[TResult] = func()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 262, in <lambda>
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_hooks.py", line 493, in __call__
    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_manager.py", line 115, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 152, in _multicall
    return outcome.get_result()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_result.py", line 114, in get_result
    raise exc.with_traceback(exc.__traceback__)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 77, in _multicall
    res = hook_impl.function(*args)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 177, in pytest_runtest_call
    raise e
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 169, in pytest_runtest_call
    item.runtest()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/python.py", line 1792, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_hooks.py", line 493, in __call__
    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_manager.py", line 115, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 113, in _multicall
    raise exception.with_traceback(exception.__traceback__)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 77, in _multicall
    res = hook_impl.function(*args)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/python.py", line 194, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/workdir/umap-learn-0.5.3/umap/tests/test_umap_metrics.py", line 253, in test_sparse_chebyshev
    sparse_spatial_check("chebyshev", sparse_spatial_data)
  File "/workdir/umap-learn-0.5.3/umap/tests/test_umap_metrics.py", line 125, in sparse_spatial_check
    dist_matrix = pairwise_distances(sparse_spatial_data.todense(), metric=metric)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/metrics/pairwise.py", line 2184, in pairwise_distances
    X, Y = check_pairwise_arrays(
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/metrics/pairwise.py", line 156, in check_pairwise_arrays
    X = Y = check_array(
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/utils/validation.py", line 751, in check_array
    raise TypeError(
TypeError: np.matrix is not supported. Please convert to a numpy array with np.asarray. For more information see: https://numpy.org/doc/stable/reference/generated/numpy.matrix.html
____________________________ test_sparse_minkowski _____________________________
Traceback (most recent call last):
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 341, in from_call
    result: Optional[TResult] = func()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 262, in <lambda>
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_hooks.py", line 493, in __call__
    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_manager.py", line 115, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 152, in _multicall
    return outcome.get_result()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_result.py", line 114, in get_result
    raise exc.with_traceback(exc.__traceback__)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 77, in _multicall
    res = hook_impl.function(*args)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 177, in pytest_runtest_call
    raise e
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 169, in pytest_runtest_call
    item.runtest()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/python.py", line 1792, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_hooks.py", line 493, in __call__
    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_manager.py", line 115, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 113, in _multicall
    raise exception.with_traceback(exception.__traceback__)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 77, in _multicall
    res = hook_impl.function(*args)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/python.py", line 194, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/workdir/umap-learn-0.5.3/umap/tests/test_umap_metrics.py", line 257, in test_sparse_minkowski
    sparse_spatial_check("minkowski", sparse_spatial_data)
  File "/workdir/umap-learn-0.5.3/umap/tests/test_umap_metrics.py", line 125, in sparse_spatial_check
    dist_matrix = pairwise_distances(sparse_spatial_data.todense(), metric=metric)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/metrics/pairwise.py", line 2184, in pairwise_distances
    X, Y = check_pairwise_arrays(
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/metrics/pairwise.py", line 156, in check_pairwise_arrays
    X = Y = check_array(
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/utils/validation.py", line 751, in check_array
    raise TypeError(
TypeError: np.matrix is not supported. Please convert to a numpy array with np.asarray. For more information see: https://numpy.org/doc/stable/reference/generated/numpy.matrix.html
_____________________________ test_sparse_hamming ______________________________
Traceback (most recent call last):
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 341, in from_call
    result: Optional[TResult] = func()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 262, in <lambda>
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_hooks.py", line 493, in __call__
    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_manager.py", line 115, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 152, in _multicall
    return outcome.get_result()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_result.py", line 114, in get_result
    raise exc.with_traceback(exc.__traceback__)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 77, in _multicall
    res = hook_impl.function(*args)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 177, in pytest_runtest_call
    raise e
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 169, in pytest_runtest_call
    item.runtest()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/python.py", line 1792, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_hooks.py", line 493, in __call__
    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_manager.py", line 115, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 113, in _multicall
    raise exception.with_traceback(exception.__traceback__)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 77, in _multicall
    res = hook_impl.function(*args)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/python.py", line 194, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/workdir/umap-learn-0.5.3/umap/tests/test_umap_metrics.py", line 261, in test_sparse_hamming
    sparse_spatial_check("hamming", sparse_spatial_data)
  File "/workdir/umap-learn-0.5.3/umap/tests/test_umap_metrics.py", line 125, in sparse_spatial_check
    dist_matrix = pairwise_distances(sparse_spatial_data.todense(), metric=metric)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/metrics/pairwise.py", line 2184, in pairwise_distances
    X, Y = check_pairwise_arrays(
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/metrics/pairwise.py", line 156, in check_pairwise_arrays
    X = Y = check_array(
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/utils/validation.py", line 751, in check_array
    raise TypeError(
TypeError: np.matrix is not supported. Please convert to a numpy array with np.asarray. For more information see: https://numpy.org/doc/stable/reference/generated/numpy.matrix.html
_____________________________ test_sparse_canberra _____________________________
Traceback (most recent call last):
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 341, in from_call
    result: Optional[TResult] = func()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 262, in <lambda>
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_hooks.py", line 493, in __call__
    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_manager.py", line 115, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 152, in _multicall
    return outcome.get_result()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_result.py", line 114, in get_result
    raise exc.with_traceback(exc.__traceback__)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 77, in _multicall
    res = hook_impl.function(*args)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 177, in pytest_runtest_call
    raise e
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 169, in pytest_runtest_call
    item.runtest()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/python.py", line 1792, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_hooks.py", line 493, in __call__
    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_manager.py", line 115, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 113, in _multicall
    raise exception.with_traceback(exception.__traceback__)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 77, in _multicall
    res = hook_impl.function(*args)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/python.py", line 194, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/workdir/umap-learn-0.5.3/umap/tests/test_umap_metrics.py", line 265, in test_sparse_canberra
    sparse_spatial_check("canberra", sparse_spatial_data)
  File "/workdir/umap-learn-0.5.3/umap/tests/test_umap_metrics.py", line 125, in sparse_spatial_check
    dist_matrix = pairwise_distances(sparse_spatial_data.todense(), metric=metric)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/metrics/pairwise.py", line 2184, in pairwise_distances
    X, Y = check_pairwise_arrays(
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/metrics/pairwise.py", line 156, in check_pairwise_arrays
    X = Y = check_array(
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/utils/validation.py", line 751, in check_array
    raise TypeError(
TypeError: np.matrix is not supported. Please convert to a numpy array with np.asarray. For more information see: https://numpy.org/doc/stable/reference/generated/numpy.matrix.html
______________________________ test_sparse_cosine ______________________________
Traceback (most recent call last):
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 341, in from_call
    result: Optional[TResult] = func()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 262, in <lambda>
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_hooks.py", line 493, in __call__
    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_manager.py", line 115, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 152, in _multicall
    return outcome.get_result()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_result.py", line 114, in get_result
    raise exc.with_traceback(exc.__traceback__)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 77, in _multicall
    res = hook_impl.function(*args)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 177, in pytest_runtest_call
    raise e
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 169, in pytest_runtest_call
    item.runtest()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/python.py", line 1792, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_hooks.py", line 493, in __call__
    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_manager.py", line 115, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 113, in _multicall
    raise exception.with_traceback(exception.__traceback__)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 77, in _multicall
    res = hook_impl.function(*args)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/python.py", line 194, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/workdir/umap-learn-0.5.3/umap/tests/test_umap_metrics.py", line 269, in test_sparse_cosine
    sparse_spatial_check("cosine", sparse_spatial_data)
  File "/workdir/umap-learn-0.5.3/umap/tests/test_umap_metrics.py", line 125, in sparse_spatial_check
    dist_matrix = pairwise_distances(sparse_spatial_data.todense(), metric=metric)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/metrics/pairwise.py", line 2196, in pairwise_distances
    return _parallel_pairwise(X, Y, func, n_jobs, **kwds)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/metrics/pairwise.py", line 1766, in _parallel_pairwise
    return func(X, Y, **kwds)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/utils/_param_validation.py", line 214, in wrapper
    return func(*args, **kwargs)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/metrics/pairwise.py", line 1105, in cosine_distances
    S = cosine_similarity(X, Y)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/utils/_param_validation.py", line 187, in wrapper
    return func(*args, **kwargs)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/metrics/pairwise.py", line 1578, in cosine_similarity
    X, Y = check_pairwise_arrays(X, Y)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/metrics/pairwise.py", line 156, in check_pairwise_arrays
    X = Y = check_array(
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/utils/validation.py", line 751, in check_array
    raise TypeError(
TypeError: np.matrix is not supported. Please convert to a numpy array with np.asarray. For more information see: https://numpy.org/doc/stable/reference/generated/numpy.matrix.html
___________________________ test_sparse_correlation ____________________________
Traceback (most recent call last):
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 341, in from_call
    result: Optional[TResult] = func()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 262, in <lambda>
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_hooks.py", line 493, in __call__
    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_manager.py", line 115, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 152, in _multicall
    return outcome.get_result()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_result.py", line 114, in get_result
    raise exc.with_traceback(exc.__traceback__)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 77, in _multicall
    res = hook_impl.function(*args)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 177, in pytest_runtest_call
    raise e
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 169, in pytest_runtest_call
    item.runtest()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/python.py", line 1792, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_hooks.py", line 493, in __call__
    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_manager.py", line 115, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 113, in _multicall
    raise exception.with_traceback(exception.__traceback__)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 77, in _multicall
    res = hook_impl.function(*args)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/python.py", line 194, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/workdir/umap-learn-0.5.3/umap/tests/test_umap_metrics.py", line 273, in test_sparse_correlation
    sparse_spatial_check("correlation", sparse_spatial_data)
  File "/workdir/umap-learn-0.5.3/umap/tests/test_umap_metrics.py", line 125, in sparse_spatial_check
    dist_matrix = pairwise_distances(sparse_spatial_data.todense(), metric=metric)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/metrics/pairwise.py", line 2184, in pairwise_distances
    X, Y = check_pairwise_arrays(
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/metrics/pairwise.py", line 156, in check_pairwise_arrays
    X = Y = check_array(
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/utils/validation.py", line 751, in check_array
    raise TypeError(
TypeError: np.matrix is not supported. Please convert to a numpy array with np.asarray. For more information see: https://numpy.org/doc/stable/reference/generated/numpy.matrix.html
____________________________ test_sparse_braycurtis ____________________________
Traceback (most recent call last):
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 341, in from_call
    result: Optional[TResult] = func()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 262, in <lambda>
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_hooks.py", line 493, in __call__
    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_manager.py", line 115, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 152, in _multicall
    return outcome.get_result()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_result.py", line 114, in get_result
    raise exc.with_traceback(exc.__traceback__)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 77, in _multicall
    res = hook_impl.function(*args)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 177, in pytest_runtest_call
    raise e
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 169, in pytest_runtest_call
    item.runtest()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/python.py", line 1792, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_hooks.py", line 493, in __call__
    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_manager.py", line 115, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 113, in _multicall
    raise exception.with_traceback(exception.__traceback__)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 77, in _multicall
    res = hook_impl.function(*args)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/python.py", line 194, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/workdir/umap-learn-0.5.3/umap/tests/test_umap_metrics.py", line 277, in test_sparse_braycurtis
    sparse_spatial_check("braycurtis", sparse_spatial_data)
  File "/workdir/umap-learn-0.5.3/umap/tests/test_umap_metrics.py", line 125, in sparse_spatial_check
    dist_matrix = pairwise_distances(sparse_spatial_data.todense(), metric=metric)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/metrics/pairwise.py", line 2184, in pairwise_distances
    X, Y = check_pairwise_arrays(
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/metrics/pairwise.py", line 156, in check_pairwise_arrays
    X = Y = check_array(
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/utils/validation.py", line 751, in check_array
    raise TypeError(
TypeError: np.matrix is not supported. Please convert to a numpy array with np.asarray. For more information see: https://numpy.org/doc/stable/reference/generated/numpy.matrix.html
_____________________________ test_sparse_jaccard ______________________________
Traceback (most recent call last):
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 341, in from_call
    result: Optional[TResult] = func()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 262, in <lambda>
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_hooks.py", line 493, in __call__
    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_manager.py", line 115, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 152, in _multicall
    return outcome.get_result()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_result.py", line 114, in get_result
    raise exc.with_traceback(exc.__traceback__)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 77, in _multicall
    res = hook_impl.function(*args)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 177, in pytest_runtest_call
    raise e
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 169, in pytest_runtest_call
    item.runtest()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/python.py", line 1792, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_hooks.py", line 493, in __call__
    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_manager.py", line 115, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 113, in _multicall
    raise exception.with_traceback(exception.__traceback__)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 77, in _multicall
    res = hook_impl.function(*args)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/python.py", line 194, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/workdir/umap-learn-0.5.3/umap/tests/test_umap_metrics.py", line 286, in test_sparse_jaccard
    sparse_binary_check("jaccard", sparse_binary_data)
  File "/workdir/umap-learn-0.5.3/umap/tests/test_umap_metrics.py", line 144, in sparse_binary_check
    dist_matrix = pairwise_distances(sparse_binary_data.todense(), metric=metric)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/metrics/pairwise.py", line 2184, in pairwise_distances
    X, Y = check_pairwise_arrays(
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/metrics/pairwise.py", line 156, in check_pairwise_arrays
    X = Y = check_array(
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/utils/validation.py", line 751, in check_array
    raise TypeError(
TypeError: np.matrix is not supported. Please convert to a numpy array with np.asarray. For more information see: https://numpy.org/doc/stable/reference/generated/numpy.matrix.html
_____________________________ test_sparse_matching _____________________________
Traceback (most recent call last):
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 341, in from_call
    result: Optional[TResult] = func()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 262, in <lambda>
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_hooks.py", line 493, in __call__
    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_manager.py", line 115, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 152, in _multicall
    return outcome.get_result()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_result.py", line 114, in get_result
    raise exc.with_traceback(exc.__traceback__)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 77, in _multicall
    res = hook_impl.function(*args)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 177, in pytest_runtest_call
    raise e
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 169, in pytest_runtest_call
    item.runtest()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/python.py", line 1792, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_hooks.py", line 493, in __call__
    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_manager.py", line 115, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 113, in _multicall
    raise exception.with_traceback(exception.__traceback__)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 77, in _multicall
    res = hook_impl.function(*args)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/python.py", line 194, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/workdir/umap-learn-0.5.3/umap/tests/test_umap_metrics.py", line 290, in test_sparse_matching
    sparse_binary_check("matching", sparse_binary_data)
  File "/workdir/umap-learn-0.5.3/umap/tests/test_umap_metrics.py", line 144, in sparse_binary_check
    dist_matrix = pairwise_distances(sparse_binary_data.todense(), metric=metric)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/metrics/pairwise.py", line 2184, in pairwise_distances
    X, Y = check_pairwise_arrays(
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/metrics/pairwise.py", line 156, in check_pairwise_arrays
    X = Y = check_array(
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/utils/validation.py", line 751, in check_array
    raise TypeError(
TypeError: np.matrix is not supported. Please convert to a numpy array with np.asarray. For more information see: https://numpy.org/doc/stable/reference/generated/numpy.matrix.html
_______________________________ test_sparse_dice _______________________________
Traceback (most recent call last):
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 341, in from_call
    result: Optional[TResult] = func()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 262, in <lambda>
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_hooks.py", line 493, in __call__
    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_manager.py", line 115, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 152, in _multicall
    return outcome.get_result()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_result.py", line 114, in get_result
    raise exc.with_traceback(exc.__traceback__)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 77, in _multicall
    res = hook_impl.function(*args)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 177, in pytest_runtest_call
    raise e
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 169, in pytest_runtest_call
    item.runtest()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/python.py", line 1792, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_hooks.py", line 493, in __call__
    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_manager.py", line 115, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 113, in _multicall
    raise exception.with_traceback(exception.__traceback__)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 77, in _multicall
    res = hook_impl.function(*args)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/python.py", line 194, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/workdir/umap-learn-0.5.3/umap/tests/test_umap_metrics.py", line 294, in test_sparse_dice
    sparse_binary_check("dice", sparse_binary_data)
  File "/workdir/umap-learn-0.5.3/umap/tests/test_umap_metrics.py", line 144, in sparse_binary_check
    dist_matrix = pairwise_distances(sparse_binary_data.todense(), metric=metric)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/metrics/pairwise.py", line 2184, in pairwise_distances
    X, Y = check_pairwise_arrays(
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/metrics/pairwise.py", line 156, in check_pairwise_arrays
    X = Y = check_array(
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/utils/validation.py", line 751, in check_array
    raise TypeError(
TypeError: np.matrix is not supported. Please convert to a numpy array with np.asarray. For more information see: https://numpy.org/doc/stable/reference/generated/numpy.matrix.html
____________________________ test_sparse_kulsinski _____________________________
Traceback (most recent call last):
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 341, in from_call
    result: Optional[TResult] = func()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 262, in <lambda>
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_hooks.py", line 493, in __call__
    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_manager.py", line 115, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 152, in _multicall
    return outcome.get_result()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_result.py", line 114, in get_result
    raise exc.with_traceback(exc.__traceback__)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 77, in _multicall
    res = hook_impl.function(*args)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 177, in pytest_runtest_call
    raise e
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 169, in pytest_runtest_call
    item.runtest()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/python.py", line 1792, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_hooks.py", line 493, in __call__
    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_manager.py", line 115, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 113, in _multicall
    raise exception.with_traceback(exception.__traceback__)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 77, in _multicall
    res = hook_impl.function(*args)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/python.py", line 194, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/workdir/umap-learn-0.5.3/umap/tests/test_umap_metrics.py", line 298, in test_sparse_kulsinski
    sparse_binary_check("kulsinski", sparse_binary_data)
  File "/workdir/umap-learn-0.5.3/umap/tests/test_umap_metrics.py", line 144, in sparse_binary_check
    dist_matrix = pairwise_distances(sparse_binary_data.todense(), metric=metric)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/metrics/pairwise.py", line 2152, in pairwise_distances
    raise ValueError(
ValueError: Unknown metric kulsinski. Valid metrics are ['euclidean', 'l2', 'l1', 'manhattan', 'cityblock', 'braycurtis', 'canberra', 'chebyshev', 'correlation', 'cosine', 'dice', 'hamming', 'jaccard', 'mahalanobis', 'matching', 'minkowski', 'rogerstanimoto', 'russellrao', 'seuclidean', 'sokalmichener', 'sokalsneath', 'sqeuclidean', 'yule', 'wminkowski', 'nan_euclidean', 'haversine'], or 'precomputed', or a callable
__________________________ test_sparse_rogerstanimoto __________________________
Traceback (most recent call last):
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 341, in from_call
    result: Optional[TResult] = func()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 262, in <lambda>
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_hooks.py", line 493, in __call__
    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_manager.py", line 115, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 152, in _multicall
    return outcome.get_result()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_result.py", line 114, in get_result
    raise exc.with_traceback(exc.__traceback__)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 77, in _multicall
    res = hook_impl.function(*args)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 177, in pytest_runtest_call
    raise e
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 169, in pytest_runtest_call
    item.runtest()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/python.py", line 1792, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_hooks.py", line 493, in __call__
    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_manager.py", line 115, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 113, in _multicall
    raise exception.with_traceback(exception.__traceback__)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 77, in _multicall
    res = hook_impl.function(*args)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/python.py", line 194, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/workdir/umap-learn-0.5.3/umap/tests/test_umap_metrics.py", line 302, in test_sparse_rogerstanimoto
    sparse_binary_check("rogerstanimoto", sparse_binary_data)
  File "/workdir/umap-learn-0.5.3/umap/tests/test_umap_metrics.py", line 144, in sparse_binary_check
    dist_matrix = pairwise_distances(sparse_binary_data.todense(), metric=metric)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/metrics/pairwise.py", line 2184, in pairwise_distances
    X, Y = check_pairwise_arrays(
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/metrics/pairwise.py", line 156, in check_pairwise_arrays
    X = Y = check_array(
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/utils/validation.py", line 751, in check_array
    raise TypeError(
TypeError: np.matrix is not supported. Please convert to a numpy array with np.asarray. For more information see: https://numpy.org/doc/stable/reference/generated/numpy.matrix.html
____________________________ test_sparse_russellrao ____________________________
Traceback (most recent call last):
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 341, in from_call
    result: Optional[TResult] = func()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 262, in <lambda>
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_hooks.py", line 493, in __call__
    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_manager.py", line 115, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 152, in _multicall
    return outcome.get_result()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_result.py", line 114, in get_result
    raise exc.with_traceback(exc.__traceback__)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 77, in _multicall
    res = hook_impl.function(*args)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 177, in pytest_runtest_call
    raise e
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 169, in pytest_runtest_call
    item.runtest()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/python.py", line 1792, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_hooks.py", line 493, in __call__
    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_manager.py", line 115, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 113, in _multicall
    raise exception.with_traceback(exception.__traceback__)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 77, in _multicall
    res = hook_impl.function(*args)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/python.py", line 194, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/workdir/umap-learn-0.5.3/umap/tests/test_umap_metrics.py", line 306, in test_sparse_russellrao
    sparse_binary_check("russellrao", sparse_binary_data)
  File "/workdir/umap-learn-0.5.3/umap/tests/test_umap_metrics.py", line 144, in sparse_binary_check
    dist_matrix = pairwise_distances(sparse_binary_data.todense(), metric=metric)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/metrics/pairwise.py", line 2184, in pairwise_distances
    X, Y = check_pairwise_arrays(
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/metrics/pairwise.py", line 156, in check_pairwise_arrays
    X = Y = check_array(
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/utils/validation.py", line 751, in check_array
    raise TypeError(
TypeError: np.matrix is not supported. Please convert to a numpy array with np.asarray. For more information see: https://numpy.org/doc/stable/reference/generated/numpy.matrix.html
__________________________ test_sparse_sokalmichener ___________________________
Traceback (most recent call last):
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 341, in from_call
    result: Optional[TResult] = func()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 262, in <lambda>
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_hooks.py", line 493, in __call__
    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_manager.py", line 115, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 152, in _multicall
    return outcome.get_result()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_result.py", line 114, in get_result
    raise exc.with_traceback(exc.__traceback__)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 77, in _multicall
    res = hook_impl.function(*args)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 177, in pytest_runtest_call
    raise e
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 169, in pytest_runtest_call
    item.runtest()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/python.py", line 1792, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_hooks.py", line 493, in __call__
    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_manager.py", line 115, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 113, in _multicall
    raise exception.with_traceback(exception.__traceback__)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 77, in _multicall
    res = hook_impl.function(*args)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/python.py", line 194, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/workdir/umap-learn-0.5.3/umap/tests/test_umap_metrics.py", line 310, in test_sparse_sokalmichener
    sparse_binary_check("sokalmichener", sparse_binary_data)
  File "/workdir/umap-learn-0.5.3/umap/tests/test_umap_metrics.py", line 144, in sparse_binary_check
    dist_matrix = pairwise_distances(sparse_binary_data.todense(), metric=metric)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/metrics/pairwise.py", line 2184, in pairwise_distances
    X, Y = check_pairwise_arrays(
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/metrics/pairwise.py", line 156, in check_pairwise_arrays
    X = Y = check_array(
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/utils/validation.py", line 751, in check_array
    raise TypeError(
TypeError: np.matrix is not supported. Please convert to a numpy array with np.asarray. For more information see: https://numpy.org/doc/stable/reference/generated/numpy.matrix.html
___________________________ test_sparse_sokalsneath ____________________________
Traceback (most recent call last):
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 341, in from_call
    result: Optional[TResult] = func()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 262, in <lambda>
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_hooks.py", line 493, in __call__
    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_manager.py", line 115, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 152, in _multicall
    return outcome.get_result()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_result.py", line 114, in get_result
    raise exc.with_traceback(exc.__traceback__)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 77, in _multicall
    res = hook_impl.function(*args)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 177, in pytest_runtest_call
    raise e
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 169, in pytest_runtest_call
    item.runtest()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/python.py", line 1792, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_hooks.py", line 493, in __call__
    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_manager.py", line 115, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 113, in _multicall
    raise exception.with_traceback(exception.__traceback__)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 77, in _multicall
    res = hook_impl.function(*args)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/python.py", line 194, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/workdir/umap-learn-0.5.3/umap/tests/test_umap_metrics.py", line 314, in test_sparse_sokalsneath
    sparse_binary_check("sokalsneath", sparse_binary_data)
  File "/workdir/umap-learn-0.5.3/umap/tests/test_umap_metrics.py", line 144, in sparse_binary_check
    dist_matrix = pairwise_distances(sparse_binary_data.todense(), metric=metric)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/metrics/pairwise.py", line 2184, in pairwise_distances
    X, Y = check_pairwise_arrays(
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/metrics/pairwise.py", line 156, in check_pairwise_arrays
    X = Y = check_array(
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/utils/validation.py", line 751, in check_array
    raise TypeError(
TypeError: np.matrix is not supported. Please convert to a numpy array with np.asarray. For more information see: https://numpy.org/doc/stable/reference/generated/numpy.matrix.html
__________________ test_precomputed_sparse_transform_on_iris ___________________
Traceback (most recent call last):
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 341, in from_call
    result: Optional[TResult] = func()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 262, in <lambda>
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_hooks.py", line 493, in __call__
    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_manager.py", line 115, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 152, in _multicall
    return outcome.get_result()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_result.py", line 114, in get_result
    raise exc.with_traceback(exc.__traceback__)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 77, in _multicall
    res = hook_impl.function(*args)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 177, in pytest_runtest_call
    raise e
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 169, in pytest_runtest_call
    item.runtest()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/python.py", line 1792, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_hooks.py", line 493, in __call__
    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_manager.py", line 115, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 113, in _multicall
    raise exception.with_traceback(exception.__traceback__)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 77, in _multicall
    res = hook_impl.function(*args)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/python.py", line 194, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/workdir/umap-learn-0.5.3/umap/tests/test_umap_on_iris.py", line 182, in test_precomputed_sparse_transform_on_iris
    ).fit(distance_matrix)
  File "/workdir/umap-learn-0.5.3/umap/umap_.py", line 2378, in fit
    (X.shape[0], self.n_neighbors), dtype=np.int
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/numpy/__init__.py", line 324, in __getattr__
    raise AttributeError(__former_attrs__[attr])
AttributeError: module 'numpy' has no attribute 'int'.
`np.int` was a deprecated alias for the builtin `int`. To avoid this error in existing code, use `int` by itself. Doing this will not modify any behavior and is safe. When replacing `np.int`, you may wish to use e.g. `np.int64` or `np.int32` to specify the precision. If you wish to review your current use, check the release note link for additional information.
The aliases was originally deprecated in NumPy 1.20; for more details and guidance see the original release note at:
    https://numpy.org/devdocs/release/1.20.0-notes.html#deprecations. Did you mean: 'inf'?
_________________________ test_multi_component_layout __________________________
Traceback (most recent call last):
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 341, in from_call
    result: Optional[TResult] = func()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 262, in <lambda>
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_hooks.py", line 493, in __call__
    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_manager.py", line 115, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 152, in _multicall
    return outcome.get_result()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_result.py", line 114, in get_result
    raise exc.with_traceback(exc.__traceback__)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 77, in _multicall
    res = hook_impl.function(*args)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 177, in pytest_runtest_call
    raise e
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 169, in pytest_runtest_call
    item.runtest()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/python.py", line 1792, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_hooks.py", line 493, in __call__
    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_manager.py", line 115, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 113, in _multicall
    raise exception.with_traceback(exception.__traceback__)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 77, in _multicall
    res = hook_impl.function(*args)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/python.py", line 194, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/workdir/umap-learn-0.5.3/umap/tests/test_umap_ops.py", line 49, in test_multi_component_layout
    data, labels = make_blobs(
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/utils/_param_validation.py", line 204, in wrapper
    validate_parameter_constraints(
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/utils/_param_validation.py", line 96, in validate_parameter_constraints
    raise InvalidParameterError(
sklearn.utils._param_validation.InvalidParameterError: The 'center_box' parameter of make_blobs must be an instance of 'tuple'. Got [-20, 20] instead.
___________________ test_multi_component_layout_precomputed ____________________
Traceback (most recent call last):
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 341, in from_call
    result: Optional[TResult] = func()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 262, in <lambda>
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_hooks.py", line 493, in __call__
    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_manager.py", line 115, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 152, in _multicall
    return outcome.get_result()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_result.py", line 114, in get_result
    raise exc.with_traceback(exc.__traceback__)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 77, in _multicall
    res = hook_impl.function(*args)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 177, in pytest_runtest_call
    raise e
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 169, in pytest_runtest_call
    item.runtest()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/python.py", line 1792, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_hooks.py", line 493, in __call__
    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_manager.py", line 115, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 113, in _multicall
    raise exception.with_traceback(exception.__traceback__)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 77, in _multicall
    res = hook_impl.function(*args)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/python.py", line 194, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/workdir/umap-learn-0.5.3/umap/tests/test_umap_ops.py", line 76, in test_multi_component_layout_precomputed
    data, labels = make_blobs(
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/utils/_param_validation.py", line 204, in wrapper
    validate_parameter_constraints(
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/utils/_param_validation.py", line 96, in validate_parameter_constraints
    raise InvalidParameterError(
sklearn.utils._param_validation.InvalidParameterError: The 'center_box' parameter of make_blobs must be an instance of 'tuple'. Got [-20, 20] instead.
__________________ test_disconnected_data_precomputed[True-1] __________________
Traceback (most recent call last):
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 341, in from_call
    result: Optional[TResult] = func()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 262, in <lambda>
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_hooks.py", line 493, in __call__
    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_manager.py", line 115, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 152, in _multicall
    return outcome.get_result()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_result.py", line 114, in get_result
    raise exc.with_traceback(exc.__traceback__)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 77, in _multicall
    res = hook_impl.function(*args)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 177, in pytest_runtest_call
    raise e
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 169, in pytest_runtest_call
    item.runtest()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/python.py", line 1792, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_hooks.py", line 493, in __call__
    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_manager.py", line 115, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 113, in _multicall
    raise exception.with_traceback(exception.__traceback__)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 77, in _multicall
    res = hook_impl.function(*args)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/python.py", line 194, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/workdir/umap-learn-0.5.3/umap/tests/test_umap_ops.py", line 160, in test_disconnected_data_precomputed
    model = UMAP(n_neighbors=3, metric="precomputed", disconnection_distance=1).fit(
  File "/workdir/umap-learn-0.5.3/umap/umap_.py", line 2378, in fit
    (X.shape[0], self.n_neighbors), dtype=np.int
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/numpy/__init__.py", line 324, in __getattr__
    raise AttributeError(__former_attrs__[attr])
AttributeError: module 'numpy' has no attribute 'int'.
`np.int` was a deprecated alias for the builtin `int`. To avoid this error in existing code, use `int` by itself. Doing this will not modify any behavior and is safe. When replacing `np.int`, you may wish to use e.g. `np.int64` or `np.int32` to specify the precision. If you wish to review your current use, check the release note link for additional information.
The aliases was originally deprecated in NumPy 1.20; for more details and guidance see the original release note at:
    https://numpy.org/devdocs/release/1.20.0-notes.html#deprecations. Did you mean: 'inf'?
________________________ test_component_layout_options _________________________
Traceback (most recent call last):
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 341, in from_call
    result: Optional[TResult] = func()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 262, in <lambda>
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_hooks.py", line 493, in __call__
    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_manager.py", line 115, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 152, in _multicall
    return outcome.get_result()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_result.py", line 114, in get_result
    raise exc.with_traceback(exc.__traceback__)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 77, in _multicall
    res = hook_impl.function(*args)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 177, in pytest_runtest_call
    raise e
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 169, in pytest_runtest_call
    item.runtest()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/python.py", line 1792, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_hooks.py", line 493, in __call__
    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_manager.py", line 115, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 113, in _multicall
    raise exception.with_traceback(exception.__traceback__)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 77, in _multicall
    res = hook_impl.function(*args)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/python.py", line 194, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/workdir/umap-learn-0.5.3/umap/tests/test_umap_ops.py", line 290, in test_component_layout_options
    single = component_layout(
  File "/workdir/umap-learn-0.5.3/umap/spectral.py", line 137, in component_layout
    ).fit_transform(affinity_matrix)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/manifold/_spectral_embedding.py", line 713, in fit_transform
    self.fit(X)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/base.py", line 1145, in wrapper
    estimator._validate_params()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/base.py", line 638, in _validate_params
    validate_parameter_constraints(
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/utils/_param_validation.py", line 96, in validate_parameter_constraints
    raise InvalidParameterError(
sklearn.utils._param_validation.InvalidParameterError: The 'random_state' parameter of SpectralEmbedding must be an int in the range [0, 4294967295], an instance of 'numpy.random.mtrand.RandomState' or None. Got <module 'numpy.random' from '/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/numpy/random/__init__.py'> instead.
__________________ test_repeated_points_large_sparse_spatial ___________________
Traceback (most recent call last):
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 341, in from_call
    result: Optional[TResult] = func()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 262, in <lambda>
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_hooks.py", line 493, in __call__
    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_manager.py", line 115, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 152, in _multicall
    return outcome.get_result()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_result.py", line 114, in get_result
    raise exc.with_traceback(exc.__traceback__)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 77, in _multicall
    res = hook_impl.function(*args)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 177, in pytest_runtest_call
    raise e
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 169, in pytest_runtest_call
    item.runtest()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/python.py", line 1792, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_hooks.py", line 493, in __call__
    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_manager.py", line 115, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 113, in _multicall
    raise exception.with_traceback(exception.__traceback__)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 77, in _multicall
    res = hook_impl.function(*args)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/python.py", line 194, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/workdir/umap-learn-0.5.3/umap/tests/test_umap_repeated_data.py", line 20, in test_repeated_points_large_sparse_spatial
    ).fit(sparse_spatial_data_repeats)
  File "/workdir/umap-learn-0.5.3/umap/umap_.py", line 2305, in fit
    index, inverse, counts = csr_unique(X)
  File "/workdir/umap-learn-0.5.3/umap/utils.py", line 161, in csr_unique
    return np.unique(
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/numpy/lib/arraysetops.py", line 272, in unique
    ar = np.asanyarray(ar)
ValueError: setting an array element with a sequence. The requested array has an inhomogeneous shape after 1 dimensions. The detected shape was (16,) + inhomogeneous part.
----------------------------- Captured stdout call -----------------------------
UMAP(force_approximation_algorithm=True, n_epochs=20, n_neighbors=3, unique=True, verbose=True)
__________________ test_repeated_points_small_sparse_spatial ___________________
Traceback (most recent call last):
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 341, in from_call
    result: Optional[TResult] = func()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 262, in <lambda>
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_hooks.py", line 493, in __call__
    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_manager.py", line 115, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 152, in _multicall
    return outcome.get_result()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_result.py", line 114, in get_result
    raise exc.with_traceback(exc.__traceback__)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 77, in _multicall
    res = hook_impl.function(*args)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 177, in pytest_runtest_call
    raise e
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 169, in pytest_runtest_call
    item.runtest()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/python.py", line 1792, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_hooks.py", line 493, in __call__
    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_manager.py", line 115, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 113, in _multicall
    raise exception.with_traceback(exception.__traceback__)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 77, in _multicall
    res = hook_impl.function(*args)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/python.py", line 194, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/workdir/umap-learn-0.5.3/umap/tests/test_umap_repeated_data.py", line 25, in test_repeated_points_small_sparse_spatial
    model = UMAP(n_neighbors=3, unique=True, n_epochs=20).fit(
  File "/workdir/umap-learn-0.5.3/umap/umap_.py", line 2305, in fit
    index, inverse, counts = csr_unique(X)
  File "/workdir/umap-learn-0.5.3/umap/utils.py", line 161, in csr_unique
    return np.unique(
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/numpy/lib/arraysetops.py", line 272, in unique
    ar = np.asanyarray(ar)
ValueError: setting an array element with a sequence. The requested array has an inhomogeneous shape after 1 dimensions. The detected shape was (16,) + inhomogeneous part.
___________________ test_repeated_points_large_sparse_binary ___________________
Traceback (most recent call last):
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 341, in from_call
    result: Optional[TResult] = func()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 262, in <lambda>
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_hooks.py", line 493, in __call__
    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_manager.py", line 115, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 152, in _multicall
    return outcome.get_result()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_result.py", line 114, in get_result
    raise exc.with_traceback(exc.__traceback__)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 77, in _multicall
    res = hook_impl.function(*args)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 177, in pytest_runtest_call
    raise e
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 169, in pytest_runtest_call
    item.runtest()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/python.py", line 1792, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_hooks.py", line 493, in __call__
    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_manager.py", line 115, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 113, in _multicall
    raise exception.with_traceback(exception.__traceback__)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 77, in _multicall
    res = hook_impl.function(*args)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/python.py", line 194, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/workdir/umap-learn-0.5.3/umap/tests/test_umap_repeated_data.py", line 56, in test_repeated_points_large_sparse_binary
    ).fit(sparse_binary_data_repeats)
  File "/workdir/umap-learn-0.5.3/umap/umap_.py", line 2305, in fit
    index, inverse, counts = csr_unique(X)
  File "/workdir/umap-learn-0.5.3/umap/utils.py", line 161, in csr_unique
    return np.unique(
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/numpy/lib/arraysetops.py", line 272, in unique
    ar = np.asanyarray(ar)
ValueError: setting an array element with a sequence. The requested array has an inhomogeneous shape after 1 dimensions. The detected shape was (16,) + inhomogeneous part.
___________________ test_repeated_points_small_sparse_binary ___________________
Traceback (most recent call last):
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 341, in from_call
    result: Optional[TResult] = func()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 262, in <lambda>
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_hooks.py", line 493, in __call__
    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_manager.py", line 115, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 152, in _multicall
    return outcome.get_result()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_result.py", line 114, in get_result
    raise exc.with_traceback(exc.__traceback__)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 77, in _multicall
    res = hook_impl.function(*args)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 177, in pytest_runtest_call
    raise e
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 169, in pytest_runtest_call
    item.runtest()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/python.py", line 1792, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_hooks.py", line 493, in __call__
    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_manager.py", line 115, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 113, in _multicall
    raise exception.with_traceback(exception.__traceback__)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 77, in _multicall
    res = hook_impl.function(*args)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/python.py", line 194, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/workdir/umap-learn-0.5.3/umap/tests/test_umap_repeated_data.py", line 61, in test_repeated_points_small_sparse_binary
    model = UMAP(n_neighbors=3, unique=True, n_epochs=20).fit(
  File "/workdir/umap-learn-0.5.3/umap/umap_.py", line 2305, in fit
    index, inverse, counts = csr_unique(X)
  File "/workdir/umap-learn-0.5.3/umap/utils.py", line 161, in csr_unique
    return np.unique(
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/numpy/lib/arraysetops.py", line 272, in unique
    ar = np.asanyarray(ar)
ValueError: setting an array element with a sequence. The requested array has an inhomogeneous shape after 1 dimensions. The detected shape was (16,) + inhomogeneous part.
_____________ test_sparse_precomputed_metric_umap_trustworthiness ______________
Traceback (most recent call last):
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 341, in from_call
    result: Optional[TResult] = func()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 262, in <lambda>
    lambda: ihook(item=item, **kwds), when=when, reraise=reraise
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_hooks.py", line 493, in __call__
    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_manager.py", line 115, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 152, in _multicall
    return outcome.get_result()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_result.py", line 114, in get_result
    raise exc.with_traceback(exc.__traceback__)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 77, in _multicall
    res = hook_impl.function(*args)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 177, in pytest_runtest_call
    raise e
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/runner.py", line 169, in pytest_runtest_call
    item.runtest()
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/python.py", line 1792, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_hooks.py", line 493, in __call__
    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_manager.py", line 115, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 113, in _multicall
    raise exception.with_traceback(exception.__traceback__)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pluggy/_callers.py", line 77, in _multicall
    res = hook_impl.function(*args)
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/python.py", line 194, in pytest_pyfunc_call
    result = testfunction(**testargs)
  File "/workdir/umap-learn-0.5.3/umap/tests/test_umap_trustworthiness.py", line 154, in test_sparse_precomputed_metric_umap_trustworthiness
    ).fit_transform(dmat)
  File "/workdir/umap-learn-0.5.3/umap/umap_.py", line 2772, in fit_transform
    self.fit(X, y)
  File "/workdir/umap-learn-0.5.3/umap/umap_.py", line 2378, in fit
    (X.shape[0], self.n_neighbors), dtype=np.int
  File "/workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/numpy/__init__.py", line 324, in __getattr__
    raise AttributeError(__former_attrs__[attr])
AttributeError: module 'numpy' has no attribute 'int'.
`np.int` was a deprecated alias for the builtin `int`. To avoid this error in existing code, use `int` by itself. Doing this will not modify any behavior and is safe. When replacing `np.int`, you may wish to use e.g. `np.int64` or `np.int32` to specify the precision. If you wish to review your current use, check the release note link for additional information.
The aliases was originally deprecated in NumPy 1.20; for more details and guidance see the original release note at:
    https://numpy.org/devdocs/release/1.20.0-notes.html#deprecations. Did you mean: 'inf'?
=============================== warnings summary ===============================
umap/distances.py:1063
  /workdir/umap-learn-0.5.3/umap/distances.py:1063: NumbaDeprecationWarning: The 'nopython' keyword argument was not supplied to the 'numba.jit' decorator. The implicit default value for this argument is currently False, but it will be changed to True in Numba 0.59.0. See https://numba.readthedocs.io/en/stable/reference/deprecation.html#deprecation-of-object-mode-fall-back-behaviour-when-using-jit for details.
    @numba.jit()

umap/distances.py:1071
  /workdir/umap-learn-0.5.3/umap/distances.py:1071: NumbaDeprecationWarning: The 'nopython' keyword argument was not supplied to the 'numba.jit' decorator. The implicit default value for this argument is currently False, but it will be changed to True in Numba 0.59.0. See https://numba.readthedocs.io/en/stable/reference/deprecation.html#deprecation-of-object-mode-fall-back-behaviour-when-using-jit for details.
    @numba.jit()

umap/distances.py:1086
  /workdir/umap-learn-0.5.3/umap/distances.py:1086: NumbaDeprecationWarning: The 'nopython' keyword argument was not supplied to the 'numba.jit' decorator. The implicit default value for this argument is currently False, but it will be changed to True in Numba 0.59.0. See https://numba.readthedocs.io/en/stable/reference/deprecation.html#deprecation-of-object-mode-fall-back-behaviour-when-using-jit for details.
    @numba.jit()

umap/umap_.py:660
  /workdir/umap-learn-0.5.3/umap/umap_.py:660: NumbaDeprecationWarning: The 'nopython' keyword argument was not supplied to the 'numba.jit' decorator. The implicit default value for this argument is currently False, but it will be changed to True in Numba 0.59.0. See https://numba.readthedocs.io/en/stable/reference/deprecation.html#deprecation-of-object-mode-fall-back-behaviour-when-using-jit for details.
    @numba.jit()

umap/__init__.py:36
  /workdir/umap-learn-0.5.3/umap/__init__.py:36: DeprecationWarning: pkg_resources is deprecated as an API. See https://setuptools.pypa.io/en/latest/pkg_resources.html
    import pkg_resources

.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pkg_resources/__init__.py:2871
  /workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/pkg_resources/__init__.py:2871: DeprecationWarning: Deprecated call to `pkg_resources.declare_namespace('sphinxcontrib')`.
  Implementing implicit namespace packages (as specified in PEP 420) is preferred to `pkg_resources.declare_namespace`. See https://setuptools.pypa.io/en/latest/references/keywords.html#keyword-namespace-packages
    declare_namespace(pkg)

umap/tests/test_chunked_parallel_spatial_metric.py:234
  /workdir/umap-learn-0.5.3/umap/tests/test_chunked_parallel_spatial_metric.py:234: PytestUnknownMarkWarning: Unknown pytest.mark.benchmark - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.benchmark(

umap/tests/test_chunked_parallel_spatial_metric.py:258
  /workdir/umap-learn-0.5.3/umap/tests/test_chunked_parallel_spatial_metric.py:258: PytestUnknownMarkWarning: Unknown pytest.mark.benchmark - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.benchmark(

umap/tests/test_chunked_parallel_spatial_metric.py:288
  /workdir/umap-learn-0.5.3/umap/tests/test_chunked_parallel_spatial_metric.py:288: PytestUnknownMarkWarning: Unknown pytest.mark.benchmark - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.benchmark(

umap/tests/test_chunked_parallel_spatial_metric.py:312
  /workdir/umap-learn-0.5.3/umap/tests/test_chunked_parallel_spatial_metric.py:312: PytestUnknownMarkWarning: Unknown pytest.mark.benchmark - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.benchmark(

umap/plot.py:20
  /workdir/umap-learn-0.5.3/umap/plot.py:20: UserWarning: The umap.plot package requires extra plotting libraries to be installed.
      You can install these via pip using
  
      pip install umap-learn[plot]
  
      or via conda using
  
       conda install pandas matplotlib datashader bokeh holoviews colorcet scikit-image
      
    warn(

umap/tests/test_aligned_umap.py::test_local_clustering
umap/tests/test_aligned_umap.py::test_local_clustering
umap/tests/test_umap_on_iris.py::test_umap_clusterability_on_supervised_iris
umap/tests/test_umap_ops.py::test_blobs_cluster
  /workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/cluster/_kmeans.py:1416: FutureWarning: The default value of `n_init` will change from 10 to 'auto' in 1.4. Set the value of `n_init` explicitly to suppress the warning
    super()._check_params_vs_input(X, default_n_init=10)

umap/tests/test_aligned_umap.py::test_aligned_update
  /workdir/umap-learn-0.5.3/umap/aligned_umap.py:188: NumbaTypeSafetyWarning: unsafe cast from int64 to int32. Precision may be lost.
    if i in relation_dict:

umap/tests/test_umap_metrics.py::test_hellinger
  /workdir/umap-learn-0.5.3/umap/tests/test_umap_metrics.py:405: RuntimeWarning: invalid value encountered in sqrt
    dist_matrix = np.sqrt(dist_matrix)

umap/tests/test_umap_on_iris.py::test_precomputed_transform_on_iris
umap/tests/test_umap_on_iris.py::test_precomputed_sparse_transform_on_iris
umap/tests/test_umap_ops.py::test_disconnected_data_precomputed[True-1]
umap/tests/test_umap_ops.py::test_disconnected_data_precomputed[False-1]
umap/tests/test_umap_trustworthiness.py::test_sparse_precomputed_metric_umap_trustworthiness
umap/tests/test_umap_validation_params.py::test_umap_update_bad_params
  /workdir/umap-learn-0.5.3/umap/umap_.py:1780: UserWarning: using precomputed metric; inverse_transform will be unavailable
    warn("using precomputed metric; inverse_transform will be unavailable")

umap/tests/test_umap_on_iris.py::test_precomputed_transform_on_iris
  /workdir/umap-learn-0.5.3/umap/umap_.py:2830: UserWarning: Transforming new data with precomputed metric. We are assuming the input data is a matrix of distances from the new points to the points in the training set. If the input matrix is sparse, it should contain distances from the new points to their nearest neighbours or approximate nearest neighbours in the training set.
    warn(

umap/tests/test_umap_ops.py::test_blobs_cluster
  /workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/sklearn/manifold/_spectral_embedding.py:273: UserWarning: Graph is not fully connected, spectral embedding may not work as expected.
    warnings.warn(

umap/tests/test_umap_ops.py::test_disconnected_data[True-jaccard-1]
umap/tests/test_umap_ops.py::test_disconnected_data[True-jaccard-5]
umap/tests/test_umap_ops.py::test_disconnected_data[True-hellinger-1]
umap/tests/test_umap_ops.py::test_disconnected_data[True-hellinger-5]
umap/tests/test_umap_ops.py::test_disconnected_data[False-jaccard-1]
umap/tests/test_umap_ops.py::test_disconnected_data[False-jaccard-5]
umap/tests/test_umap_ops.py::test_disconnected_data[False-hellinger-1]
umap/tests/test_umap_ops.py::test_disconnected_data[False-hellinger-5]
  /workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/lib/python3.10/site-packages/_pytest/python.py:194: PytestRemovedIn8Warning: Passing None has been deprecated.
  See https://docs.pytest.org/en/latest/how-to/capture-warnings.html#additional-use-cases-of-warnings-in-tests for alternatives in common use cases.
    result = testfunction(**testargs)

umap/tests/test_umap_ops.py::test_disconnected_data_precomputed[False-1]
  /workdir/umap-learn-0.5.3/umap/umap_.py:125: UserWarning: A few of your vertices were disconnected from the manifold.  This shouldn't cause problems.
  Disconnection_distance = 1 has removed 26 edges.
  It has only fully disconnected 1 vertices.
  Use umap.utils.disconnected_vertices() to identify them.
    warn(

umap/tests/test_umap_repeated_data.py::test_repeated_points_large_n
umap/tests/test_umap_validation_params.py::test_umap_too_many_neighbors_warns
umap/tests/test_umap_validation_params.py::test_umap_inverse_transform_fails_expectedly
  /workdir/umap-learn-0.5.3/umap/umap_.py:2344: UserWarning: n_neighbors is larger than the dataset size; truncating to X.shape[0] - 1
    warn(

umap/tests/test_umap_validation_params.py::test_umap_inverse_transform_fails_expectedly
  /workdir/umap-learn-0.5.3/umap/umap_.py:1802: UserWarning: gradient function is not yet implemented for dice distance metric; inverse_transform will be unavailable
    warn(

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
- generated xml file: /workdir/results/umap-learn/0.5.3/1/cpython-test-results.xml -
=========================== short test summary info ============================
FAILED umap/tests/test_composite_models.py::test_composite_trustworthiness - ...
FAILED umap/tests/test_umap_metrics.py::test_kulsinski - ValueError: Unknown ...
FAILED umap/tests/test_umap_metrics.py::test_sparse_euclidean - TypeError: np...
FAILED umap/tests/test_umap_metrics.py::test_sparse_manhattan - TypeError: np...
FAILED umap/tests/test_umap_metrics.py::test_sparse_chebyshev - TypeError: np...
FAILED umap/tests/test_umap_metrics.py::test_sparse_minkowski - TypeError: np...
FAILED umap/tests/test_umap_metrics.py::test_sparse_hamming - TypeError: np.m...
FAILED umap/tests/test_umap_metrics.py::test_sparse_canberra - TypeError: np....
FAILED umap/tests/test_umap_metrics.py::test_sparse_cosine - TypeError: np.ma...
FAILED umap/tests/test_umap_metrics.py::test_sparse_correlation - TypeError: ...
FAILED umap/tests/test_umap_metrics.py::test_sparse_braycurtis - TypeError: n...
FAILED umap/tests/test_umap_metrics.py::test_sparse_jaccard - TypeError: np.m...
FAILED umap/tests/test_umap_metrics.py::test_sparse_matching - TypeError: np....
FAILED umap/tests/test_umap_metrics.py::test_sparse_dice - TypeError: np.matr...
FAILED umap/tests/test_umap_metrics.py::test_sparse_kulsinski - ValueError: U...
FAILED umap/tests/test_umap_metrics.py::test_sparse_rogerstanimoto - TypeErro...
FAILED umap/tests/test_umap_metrics.py::test_sparse_russellrao - TypeError: n...
FAILED umap/tests/test_umap_metrics.py::test_sparse_sokalmichener - TypeError...
FAILED umap/tests/test_umap_metrics.py::test_sparse_sokalsneath - TypeError: ...
FAILED umap/tests/test_umap_on_iris.py::test_precomputed_sparse_transform_on_iris
FAILED umap/tests/test_umap_ops.py::test_multi_component_layout - sklearn.uti...
FAILED umap/tests/test_umap_ops.py::test_multi_component_layout_precomputed
FAILED umap/tests/test_umap_ops.py::test_disconnected_data_precomputed[True-1]
FAILED umap/tests/test_umap_ops.py::test_component_layout_options - sklearn.u...
FAILED umap/tests/test_umap_repeated_data.py::test_repeated_points_large_sparse_spatial
FAILED umap/tests/test_umap_repeated_data.py::test_repeated_points_small_sparse_spatial
FAILED umap/tests/test_umap_repeated_data.py::test_repeated_points_large_sparse_binary
FAILED umap/tests/test_umap_repeated_data.py::test_repeated_points_small_sparse_binary
FAILED umap/tests/test_umap_trustworthiness.py::test_sparse_precomputed_metric_umap_trustworthiness
===== 29 failed, 110 passed, 60 skipped, 38 warnings in 742.30s (0:12:22) ======
ERROR: InvocationError for command /workdir/umap-learn-0.5.3/.tox/cpythonlibtest-unit-test-tests/bin/pytest -v --tb=native --junitxml /workdir/results/umap-learn/0.5.3/1/cpython-test-results.xml (exited with code 1)
___________________________________ summary ____________________________________
ERROR:   cpythonlibtest-unit-test-tests: commands failed
