graalpylibtest-unit-test-tests create: /workdir/jupyter-core-5.2.0/.tox/graalpylibtest-unit-test-tests
graalpylibtest-unit-test-tests installdeps: mock, pytest
graalpylibtest-unit-test-tests inst: /workdir/jupyter-core-5.2.0/.tox/.tmp/package/1/jupyter_core-5.2.0.tar.gz
graalpylibtest-unit-test-tests installed: exceptiongroup==1.2.0,graalpy-virtualenv==0.0.1,hpy==0.9.0rc2,iniconfig==2.0.0,jupyter_core @ file:///workdir/jupyter-core-5.2.0/.tox/.tmp/package/1/jupyter_core-5.2.0.tar.gz,mock==5.1.0,packaging==23.2,platformdirs==4.0.0,pluggy==1.3.0,pytest==7.4.3,tomli==2.0.1,traitlets==5.13.0
graalpylibtest-unit-test-tests run-test-pre: PYTHONHASHSEED='1996252336'
graalpylibtest-unit-test-tests run-test: commands[0] | pytest -v --tb=native --junitxml /workdir/results/jupyter-core/5.2.0/1/graalpy-test-results.xml
[1m============================= test session starts ==============================[0m
platform linux -- Python 3.10.8, pytest-7.4.3, pluggy-1.3.0 -- /workdir/jupyter-core-5.2.0/.tox/graalpylibtest-unit-test-tests/bin/python
cachedir: .tox/graalpylibtest-unit-test-tests/.pytest_cache
rootdir: /workdir/jupyter-core-5.2.0
configfile: pyproject.toml
testpaths: jupyter_core/tests/
[1mcollecting ... [0mcollected 75 items

jupyter_core/tests/test_application.py::test_basic [32mPASSED[0m[33m                [  1%][0m
jupyter_core/tests/test_application.py::test_default_traits [32mPASSED[0m[33m       [  2%][0m
jupyter_core/tests/test_application.py::test_custom_config [32mPASSED[0m[33m        [  4%][0m
jupyter_core/tests/test_application.py::test_cli_override [32mPASSED[0m[33m         [  5%][0m
jupyter_core/tests/test_application.py::test_generate_config [32mPASSED[0m[33m      [  6%][0m
jupyter_core/tests/test_application.py::test_load_config [32mPASSED[0m[33m          [  8%][0m
jupyter_core/tests/test_application.py::test_load_config_no_cwd [32mPASSED[0m[33m   [  9%][0m
jupyter_core/tests/test_application.py::test_load_bad_config [32mPASSED[0m[33m      [ 10%][0m
jupyter_core/tests/test_application.py::test_runtime_dir_changed [32mPASSED[0m[33m  [ 12%][0m
jupyter_core/tests/test_async.py::test_ensure_async [32mPASSED[0m[33m               [ 13%][0m
jupyter_core/tests/test_async.py::test_run_sync [32mPASSED[0m[33m                   [ 14%][0m
jupyter_core/tests/test_command.py::test_config_dir [32mPASSED[0m[33m               [ 16%][0m
jupyter_core/tests/test_command.py::test_data_dir [32mPASSED[0m[33m                 [ 17%][0m
jupyter_core/tests/test_command.py::test_runtime_dir [32mPASSED[0m[33m              [ 18%][0m
jupyter_core/tests/test_command.py::test_paths [32mPASSED[0m[33m                    [ 20%][0m
jupyter_core/tests/test_command.py::test_paths_json [32mPASSED[0m[33m               [ 21%][0m
jupyter_core/tests/test_command.py::test_paths_debug [32mPASSED[0m[33m              [ 22%][0m
jupyter_core/tests/test_command.py::test_subcommand_not_given [32mPASSED[0m[33m     [ 24%][0m
jupyter_core/tests/test_command.py::test_help [32mPASSED[0m[33m                     [ 25%][0m
jupyter_core/tests/test_command.py::test_subcommand_not_found [32mPASSED[0m[33m     [ 26%][0m
jupyter_core/tests/test_command.py::test_subcommand_list [32mPASSED[0m[33m          [ 28%][0m
jupyter_core/tests/test_command.py::test_not_on_path [32mPASSED[0m[33m              [ 29%][0m
jupyter_core/tests/test_command.py::test_path_priority [32mPASSED[0m[33m            [ 30%][0m
jupyter_core/tests/test_command.py::test_argv0 [32mPASSED[0m[33m                    [ 32%][0m
jupyter_core/tests/test_migrate.py::test_migrate_file [32mPASSED[0m[33m             [ 33%][0m
jupyter_core/tests/test_migrate.py::test_migrate_dir [32mPASSED[0m[33m              [ 34%][0m
jupyter_core/tests/test_migrate.py::test_migrate_one [32mPASSED[0m[33m              [ 36%][0m
jupyter_core/tests/test_migrate.py::test_migrate_config [32mPASSED[0m[33m           [ 37%][0m
jupyter_core/tests/test_migrate.py::test_migrate_custom_default [32mPASSED[0m[33m   [ 38%][0m
jupyter_core/tests/test_migrate.py::test_migrate_nothing [32mPASSED[0m[33m          [ 40%][0m
jupyter_core/tests/test_migrate.py::test_migrate_default [32mPASSED[0m[33m          [ 41%][0m
jupyter_core/tests/test_migrate.py::test_migrate [32mPASSED[0m[33m                  [ 42%][0m
jupyter_core/tests/test_paths.py::test_envset [32mPASSED[0m[33m                     [ 44%][0m
jupyter_core/tests/test_paths.py::test_config_dir [32mPASSED[0m[33m                 [ 45%][0m
jupyter_core/tests/test_paths.py::test_config_dir_darwin [33mSKIPPED[0m (on...)[33m [ 46%][0m
jupyter_core/tests/test_paths.py::test_config_dir_windows [33mSKIPPED[0m (o...)[33m [ 48%][0m
jupyter_core/tests/test_paths.py::test_config_dir_linux [32mPASSED[0m[33m           [ 49%][0m
jupyter_core/tests/test_paths.py::test_config_env_legacy [32mPASSED[0m[33m          [ 50%][0m
jupyter_core/tests/test_paths.py::test_config_env [32mPASSED[0m[33m                 [ 52%][0m
jupyter_core/tests/test_paths.py::test_data_dir_env_legacy [32mPASSED[0m[33m        [ 53%][0m
jupyter_core/tests/test_paths.py::test_data_dir_env [32mPASSED[0m[33m               [ 54%][0m
jupyter_core/tests/test_paths.py::test_data_dir_darwin_legacy [33mSKIPPED[0m[33m    [ 56%][0m
jupyter_core/tests/test_paths.py::test_data_dir_darwin [33mSKIPPED[0m (only...)[33m [ 57%][0m
jupyter_core/tests/test_paths.py::test_data_dir_windows_legacy [33mSKIPPED[0m[33m   [ 58%][0m
jupyter_core/tests/test_paths.py::test_data_dir_windows [33mSKIPPED[0m (onl...)[33m [ 60%][0m
jupyter_core/tests/test_paths.py::test_data_dir_linux_legacy [32mPASSED[0m[33m      [ 61%][0m
jupyter_core/tests/test_paths.py::test_data_dir_linux [32mPASSED[0m[33m             [ 62%][0m
jupyter_core/tests/test_paths.py::test_runtime_dir_env_legacy [32mPASSED[0m[33m     [ 64%][0m
jupyter_core/tests/test_paths.py::test_runtime_dir_env [32mPASSED[0m[33m            [ 65%][0m
jupyter_core/tests/test_paths.py::test_runtime_dir_darwin_legacy [33mSKIPPED[0m[33m [ 66%][0m
jupyter_core/tests/test_paths.py::test_runtime_dir_darwin [33mSKIPPED[0m (o...)[33m [ 68%][0m
jupyter_core/tests/test_paths.py::test_runtime_dir_windows_legacy [33mSKIPPED[0m[33m [ 69%][0m
jupyter_core/tests/test_paths.py::test_runtime_dir_windows [33mSKIPPED[0m (...)[33m [ 70%][0m
jupyter_core/tests/test_paths.py::test_runtime_dir_linux_legacy [32mPASSED[0m[33m   [ 72%][0m
jupyter_core/tests/test_paths.py::test_runtime_dir_linux [32mPASSED[0m[33m          [ 73%][0m
jupyter_core/tests/test_paths.py::test_jupyter_path [32mPASSED[0m[33m               [ 74%][0m
jupyter_core/tests/test_paths.py::test_jupyter_path_user_site [32mPASSED[0m[33m     [ 76%][0m
jupyter_core/tests/test_paths.py::test_jupyter_path_no_user_site [32mPASSED[0m[33m  [ 77%][0m
jupyter_core/tests/test_paths.py::test_jupyter_path_prefer_env [32mPASSED[0m[33m    [ 78%][0m
jupyter_core/tests/test_paths.py::test_jupyter_path_env [32mPASSED[0m[33m           [ 80%][0m
jupyter_core/tests/test_paths.py::test_jupyter_path_sys_prefix [32mPASSED[0m[33m    [ 81%][0m
jupyter_core/tests/test_paths.py::test_jupyter_path_subdir [32mPASSED[0m[33m        [ 82%][0m
jupyter_core/tests/test_paths.py::test_jupyter_config_path [32mPASSED[0m[33m        [ 84%][0m
jupyter_core/tests/test_paths.py::test_jupyter_config_path_no_user_site [32mPASSED[0m[33m [ 85%][0m
jupyter_core/tests/test_paths.py::test_jupyter_config_path_prefer_env [32mPASSED[0m[33m [ 86%][0m
jupyter_core/tests/test_paths.py::test_jupyter_config_path_env [32mPASSED[0m[33m    [ 88%][0m
jupyter_core/tests/test_paths.py::test_prefer_environment_over_user [32mPASSED[0m[33m [ 89%][0m
jupyter_core/tests/test_paths.py::test_is_hidden [32mPASSED[0m[33m                  [ 90%][0m
jupyter_core/tests/test_paths.py::test_is_hidden_win32_cpython [33mSKIPPED[0m[33m   [ 92%][0m
jupyter_core/tests/test_paths.py::test_is_hidden_win32_pypy [33mSKIPPED[0m[33m      [ 93%][0m
jupyter_core/tests/test_paths.py::test_win32_restrict_file_to_user_ctypes [33mSKIPPED[0m[33m [ 94%][0m
jupyter_core/tests/test_paths.py::test_secure_write_win32 [33mSKIPPED[0m (o...)[33m [ 96%][0m
jupyter_core/tests/test_paths.py::test_secure_write_unix [32mPASSED[0m[33m          [ 97%][0m
jupyter_core/tests/test_paths.py::test_exists [32mPASSED[0m[33m                     [ 98%][0m
jupyter_core/tests/test_paths.py::test_insecure_write_warning [32mPASSED[0m[33m     [100%][0m

[33m=============================== warnings summary ===============================[0m
<frozen importlib._bootstrap>:688
  <frozen importlib._bootstrap>:688: DeprecationWarning: Jupyter is migrating its paths to use standard platformdirs
  given by the platformdirs library.  To remove this warning and
  see the appropriate new directories, set the environment variable
  `JUPYTER_PLATFORM_DIRS=1` and then run `jupyter --paths`.
  The use of platformdirs will be the default in `jupyter_core` v6

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
- generated xml file: /workdir/results/jupyter-core/5.2.0/1/graalpy-test-results.xml -
============================= slowest 10 durations =============================
2.57s call     jupyter_core/tests/test_command.py::test_paths_debug
1.86s call     jupyter_core/tests/test_command.py::test_path_priority
1.48s call     jupyter_core/tests/test_command.py::test_subcommand_not_given
1.37s call     jupyter_core/tests/test_command.py::test_not_on_path
1.31s call     jupyter_core/tests/test_command.py::test_data_dir
1.23s call     jupyter_core/tests/test_command.py::test_argv0
1.20s call     jupyter_core/tests/test_command.py::test_help
1.11s call     jupyter_core/tests/test_command.py::test_config_dir
1.06s call     jupyter_core/tests/test_command.py::test_subcommand_not_found
1.02s call     jupyter_core/tests/test_command.py::test_paths_json
[36m[1m=========================== short test summary info ============================[0m
[33mSKIPPED[0m [1] jupyter_core/tests/test_paths.py:112: only run on macos
[33mSKIPPED[0m [1] jupyter_core/tests/test_paths.py:119: only run on windows
[33mSKIPPED[0m [1] jupyter_core/tests/test_paths.py:160: only run on macos
[33mSKIPPED[0m [1] jupyter_core/tests/test_paths.py:167: only run on macos
[33mSKIPPED[0m [1] jupyter_core/tests/test_paths.py:173: only run on windows
[33mSKIPPED[0m [1] jupyter_core/tests/test_paths.py:180: only run on windows
[33mSKIPPED[0m [1] jupyter_core/tests/test_paths.py:224: only run on macos
[33mSKIPPED[0m [1] jupyter_core/tests/test_paths.py:231: only run on macos
[33mSKIPPED[0m [1] jupyter_core/tests/test_paths.py:237: only run on windows
[33mSKIPPED[0m [1] jupyter_core/tests/test_paths.py:244: only run on windows
[33mSKIPPED[0m [1] jupyter_core/tests/test_paths.py:465: only run on windows/cpython or pypy >= 7.3.6: https://foss.heptapod.net/pypy/pypy/-/issues/3469
[33mSKIPPED[0m [1] jupyter_core/tests/test_paths.py:485: only run on windows/pypy < 7.3.6: https://foss.heptapod.net/pypy/pypy/-/issues/3469
[33mSKIPPED[0m [1] jupyter_core/tests/test_paths.py:516: only runs on windows
[33mSKIPPED[0m [1] jupyter_core/tests/test_paths.py:521: only runs on windows
[33m================== [32m61 passed[0m, [33m[1m14 skipped[0m, [33m[1m1 warning[0m[33m in 19.15s[0m[33m ==================[0m
[To redirect Truffle log output to a file use one of the following options:
* '--log.file=<path>' if the option is passed using a guest language launcher.
* '-Dpolyglot.log.file=<path>' if the option is passed using the host Java launcher.
* Configure logging using the polyglot embedding API.]
[python::PythonContext] WARNING: Could not stop thread Polyglot-python-0
ERROR: java.lang.IllegalStateException: The language did not complete all polyglot threads but should have: [Thread[#119,Polyglot-python-0,5,GRAALPYTHON_THREADS]]
org.graalvm.polyglot.PolyglotException: java.lang.IllegalStateException: The language did not complete all polyglot threads but should have: [Thread[#119,Polyglot-python-0,5,GRAALPYTHON_THREADS]]
	at org.graalvm.truffle/com.oracle.truffle.polyglot.PolyglotLanguageContext.dispose(PolyglotLanguageContext.java:473)
	at org.graalvm.truffle/com.oracle.truffle.polyglot.PolyglotContextImpl.disposeContext(PolyglotContextImpl.java:3133)
	at org.graalvm.truffle/com.oracle.truffle.polyglot.PolyglotContextImpl.finishClose(PolyglotContextImpl.java:2757)
	at org.graalvm.truffle/com.oracle.truffle.polyglot.PolyglotContextImpl.closeImpl(PolyglotContextImpl.java:2666)
	at org.graalvm.truffle/com.oracle.truffle.polyglot.PolyglotContextImpl.closeAndMaybeWait(PolyglotContextImpl.java:1835)
	at org.graalvm.truffle/com.oracle.truffle.polyglot.PolyglotContextImpl.close(PolyglotContextImpl.java:1768)
	at org.graalvm.truffle/com.oracle.truffle.polyglot.PolyglotContextDispatch.close(PolyglotContextDispatch.java:70)
	at org.graalvm.polyglot/org.graalvm.polyglot.Context.close(Context.java:834)
	at org.graalvm.polyglot/org.graalvm.polyglot.Context.close(Context.java:860)
	at com.oracle.graal.python.shell.GraalPythonMain.launch(GraalPythonMain.java:727)
	at org.graalvm.launcher.AbstractLanguageLauncher.launch(AbstractLanguageLauncher.java:296)
	at org.graalvm.launcher.AbstractLanguageLauncher.launch(AbstractLanguageLauncher.java:121)
	at org.graalvm.launcher.AbstractLanguageLauncher.runLauncher(AbstractLanguageLauncher.java:168)
	Suppressed: Attached Guest Language Frames (0)
Internal GraalVM error, please report at https://github.com/oracle/graal/issues/.
ERROR: InvocationError for command /workdir/jupyter-core-5.2.0/.tox/graalpylibtest-unit-test-tests/bin/pytest -v --tb=native --junitxml /workdir/results/jupyter-core/5.2.0/1/graalpy-test-results.xml (exited with code 1)
___________________________________ summary ____________________________________
ERROR:   graalpylibtest-unit-test-tests: commands failed
